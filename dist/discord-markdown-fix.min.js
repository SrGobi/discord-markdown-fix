var discordMarkdown=function(e,t,n){"use strict";function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const r=t,a=n;function l(e,t,n,s=!0,a={}){"object"==typeof s&&(a=s,s=!0),n||(n={}),n.class&&a.cssModuleNames&&(n.class=n.class.split(" ").map((e=>a.cssModuleNames[e]||e)).join(" "));let l="";for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&n[e]&&(l+=` ${r.sanitizeText(e)}="${r.sanitizeText(n[e])}"`);let o=`<${e}${l}>`;return s?o+t+`</${e}>`:o}r.htmlTag=l;const o={blockQuote:Object.assign({},r.defaultRules.blockQuote,{match:function(e,t,n){return!/^$|\n *$/.test(n)||t.inQuote?null:/^( *>>> ([\s\S]*))|^( *> [^\n]*(\n *> [^\n]*)*\n?)/.exec(e)},parse:function(e,t,n){const s=e[0],r=Boolean(/^ *>>> ?/.exec(s))?/^ *>>> ?/:/^ *> ?/gm;return{content:t(s.replace(r,""),Object.assign({},n,{inQuote:!0})),type:"blockQuote"}}}),codeBlock:Object.assign({},r.defaultRules.codeBlock,{match:r.inlineRegex(/^```(([a-z0-9-]+?)\n+)?\n*([^]+?)\n*```/i),parse:function(e,t,n){return{lang:(e[2]||"").trim(),content:e[3]||"",inQuote:n.inQuote||!1}},html:(e,t,n)=>{let s;return e.lang&&a.getLanguage(e.lang)&&(s=a.highlight(e.content,{language:e.lang,ignoreIllegals:!0})),s&&n.cssModuleNames&&(s.value=s.value.replace(/<span class="([a-z0-9-_ ]+)">/gi,((e,t)=>e.replace(t,t.split(" ").map((e=>n.cssModuleNames[e]||e)).join(" "))))),l("pre",l("code",s?s.value:r.sanitizeText(e.content),{class:"hljs"+(s?" "+s.language:"")},n),null,n)}}),newline:r.defaultRules.newline,escape:r.defaultRules.escape,autolink:Object.assign({},r.defaultRules.autolink,{parse:e=>({content:[{type:"text",content:e[1]}],target:e[1]}),html:(e,t,n)=>l("a",t(e.content,n),{href:r.sanitizeUrl(e.target)},n)}),url:Object.assign({},r.defaultRules.url,{parse:e=>({content:[{type:"text",content:e[1]}],target:e[1]}),html:(e,t,n)=>l("a",t(e.content,n),{href:r.sanitizeUrl(e.target)},n)}),em:Object.assign({},r.defaultRules.em,{parse:function(e,t,n){const s=r.defaultRules.em.parse(e,t,Object.assign({},n,{inEmphasis:!0}));return n.inEmphasis?s.content:s}}),strong:r.defaultRules.strong,u:r.defaultRules.u,strike:Object.assign({},r.defaultRules.del,{match:r.inlineRegex(/^~~([\s\S]+?)~~(?!_)/)}),inlineCode:Object.assign({},r.defaultRules.inlineCode,{match:e=>r.defaultRules.inlineCode.match.regex.exec(e),html:function(e,t,n){return l("code",r.sanitizeText(e.content.trim()),null,n)}}),text:Object.assign({},r.defaultRules.text,{match:e=>/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff-]|\n\n|\n|\w+:\S|$)/.exec(e),html:function(e,t,n){return n.escapeHTML?r.sanitizeText(e.content):e.content}}),emoticon:{order:r.defaultRules.text.order,match:e=>/^(¯\\_\(ツ\)_\/¯)/.exec(e),parse:function(e){return{type:"text",content:e[1]}},html:function(e,t,n){return t(e.content,n)}},br:Object.assign({},r.defaultRules.br,{match:r.anyScopeRegex(/^\n/)}),spoiler:{order:0,match:e=>/^\|\|([\s\S]+?)\|\|/.exec(e),parse:function(e,t,n){return{content:t(e[1],n)}},html:function(e,t,n){return l("span",t(e.content,n),{class:"d-spoiler"},n)}}},c={user:e=>"@"+r.sanitizeText(e.id),channel:e=>"#"+r.sanitizeText(e.id),role:e=>"&"+r.sanitizeText(e.id),everyone:()=>"@everyone",here:()=>"@here"},u={discordUser:{order:r.defaultRules.strong.order,match:e=>/^<@!?([0-9]*)>/.exec(e),parse:function(e){return{id:e[1]}},html:function(e,t,n){return l("span",n.discordCallback.user(e),{class:"d-mention d-user"},n)}},discordChannel:{order:r.defaultRules.strong.order,match:e=>/^<#?([0-9]*)>/.exec(e),parse:function(e){return{id:e[1]}},html:function(e,t,n){return l("span",n.discordCallback.channel(e),{class:"d-mention d-channel"},n)}},discordRole:{order:r.defaultRules.strong.order,match:e=>/^<@&([0-9]*)>/.exec(e),parse:function(e){return{id:e[1]}},html:function(e,t,n){return l("span",n.discordCallback.role(e),{class:"d-mention d-role"},n)}},discordEmoji:{order:r.defaultRules.strong.order,match:e=>/^<(a?):(\w+):(\d+)>/.exec(e),parse:function(e){return{animated:"a"===e[1],name:e[2],id:e[3]}},html:function(e,t,n){return l("img","",{class:"d-emoji"+(e.animated?" d-emoji-animated":""),src:`https://cdn.discordapp.com/emojis/${e.id}.${e.animated?"gif":"png"}`,alt:`:${e.name}:`},!1,n)}},discordEveryone:{order:r.defaultRules.strong.order,match:e=>/^@everyone/.exec(e),parse:function(){return{}},html:function(e,t,n){return l("span",n.discordCallback.everyone(e),{class:"d-mention d-user"},n)}},discordHere:{order:r.defaultRules.strong.order,match:e=>/^@here/.exec(e),parse:function(){return{}},html:function(e,t,n){return l("span",n.discordCallback.here(e),{class:"d-mention d-user"},n)}}};Object.assign(o,u);const i=Object.assign({},u,{text:Object.assign({},r.defaultRules.text,{match:e=>/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff-]|\n\n|\n|\w+:\S|$)/.exec(e),html:function(e,t,n){return n.escapeHTML?r.sanitizeText(e.content):e.content}})}),d=Object.assign({},o,{link:r.defaultRules.link}),m=r.parserFor(o),f=r.outputFor(o,"html"),p=r.parserFor(i),h=r.outputFor(i,"html"),g=r.parserFor(d),b=r.outputFor(d,"html");var x=s({parser:e=>m(e,{inline:!0}),htmlOutput:f,toHTML:function(e,t,n,s){if((n||s)&&(!n||!s))throw new Error("You must pass both a custom parser and custom htmlOutput function, not just one");t=Object.assign({embed:!1,escapeHTML:!0,discordOnly:!1,discordCallback:{}},t||{});let r=m,a=f;n?(r=n,a=s):t.discordOnly?(r=p,a=h):t.embed&&(r=g,a=b);const l={inline:!0,inQuote:!1,inEmphasis:!1,escapeHTML:t.escapeHTML,cssModuleNames:t.cssModuleNames||null,discordCallback:Object.assign({},c,t.discordCallback)};return a(r(e,l),l)},rules:o,rulesDiscordOnly:i,rulesEmbed:d,markdownEngine:r,htmlTag:l});return e.default=x,Object.defineProperty(e,"__esModule",{value:!0}),e}({},markdown,hljs);
